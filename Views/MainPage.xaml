<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="IDEAs.Views.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:IDEAs.Views"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:models="using:IDEAs.Models" 
    xmlns:local1="using:IDEAs.Services"
    mc:Ignorable="d">
    <Page.Resources>
        <local1:ItemTemplateSelector x:Key="ItemTemplateSelector"/>
                <DataTemplate x:Key="FolderTemplate" x:DataType="models:Folder" >
                    <StackPanel>
                        <Grid PointerPressed="Grid_PointerPressed" >
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE838;" Margin="10,0,0,0" HorizontalAlignment="Left"/>
                            <TextBlock Text="{x:Bind Title,Mode=OneWay}" Margin="35,5,0,0" />
                            <Button Background="Transparent" BorderBrush="Transparent" BorderThickness="0" HorizontalAlignment="Right" >
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE712;" />
                                <Button.Flyout>
                                    <MenuFlyout Placement="Right">
                                        <MenuFlyoutItem Text="ç§»åŠ¨" HorizontalAlignment="Left" VerticalAlignment="Top" Width="100" Click="ShowAllFoldersButton_Click" />
                                        <MenuFlyoutItem Text="åˆ é™¤" HorizontalAlignment="Left" VerticalAlignment="Top" Width="100" Click="DeleteFoldersButton_Click" />
                                        <MenuFlyoutItem Text="é‡å‘½å" HorizontalAlignment="Left" VerticalAlignment="Top" Width="100" Click="RenameFoldersButton_Click" />
                                    </MenuFlyout>
                                </Button.Flyout>
                            </Button>
                            <Button Background="Transparent" BorderBrush="Transparent" BorderThickness="0" HorizontalAlignment="Right" Margin="0,0,40,0" Click="IsImportant_Click">
                                <FontIcon
            FontFamily="Segoe MDL2 Assets"
            Glyph="{x:Bind IsImportantGlyph, Mode=OneWay}"/>
                            </Button>
                        </Grid>
                        <ListView x:Name="FolderListView" ItemsSource="{x:Bind Items1, Mode=OneWay}" ItemTemplateSelector="{StaticResource ItemTemplateSelector}" Visibility="Collapsed" >
                        </ListView>
                    </StackPanel>
        
                </DataTemplate>

        <DataTemplate x:Key="NoteTemplate" x:DataType="models:Note">
                    <StackPanel>
                        <Grid PointerPressed="GoNote">
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xF000;" Margin="10,0,0,0" HorizontalAlignment="Left"/>
                            <TextBlock Text="{x:Bind Title,Mode=OneWay}" Margin="35,5,0,0" />
                            <Button Background="Transparent" BorderBrush="Transparent" BorderThickness="0" HorizontalAlignment="Right" >
                                <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE712;" />
                                <Button.Flyout>
                                    <MenuFlyout Placement="Right">
                                        <MenuFlyoutItem Text="ç§»åŠ¨" HorizontalAlignment="Left" VerticalAlignment="Top" Width="100" Click="ShowAllFoldersButton_Click" />
                                        <MenuFlyoutItem Text="åˆ é™¤" HorizontalAlignment="Left" VerticalAlignment="Top" Width="100" Click="DeleteNoteButton_Click" />

                                    </MenuFlyout>
                                </Button.Flyout>
                            </Button>
                            <Button Background="Transparent" BorderBrush="Transparent" BorderThickness="0" HorizontalAlignment="Right" Margin="0,0,40,0" Click="IsImportant_Click">
                                <FontIcon
            FontFamily="Segoe MDL2 Assets"
            Glyph="{x:Bind IsImportantGlyph, Mode=OneWay}"/>
                            </Button>
                        </Grid>
                    </StackPanel>
                </DataTemplate>

        <DataTemplate x:Key="CalendarTemplate" x:DataType="models:Calendar" >
                    <StackPanel>
                        <Grid PointerPressed="GoCalendar">
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE787;" HorizontalAlignment="Left" />
                            <TextBlock Text="Calendar" Margin="30,0,0,0" />
                        </Grid>
                    </StackPanel>
                </DataTemplate>

        <DataTemplate x:Key="ScheduleTemplate" x:DataType="models:Schedule">
                    <StackPanel>
                        <Grid PointerPressed="GoSchedule">
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE8FD;" HorizontalAlignment="Left"/>
                            <TextBlock Text="To Do" Margin="30,0,0,0" />
                        </Grid>
                    </StackPanel>
                </DataTemplate>
        
    </Page.Resources>

    <Grid x:Name="MainGrid" Background="Transparent">

        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="LeftColumn" Width="0.42*" MaxWidth="420"/>
            <ColumnDefinition x:Name="RightColumn" Width="*" />
        </Grid.ColumnDefinitions>

        <!-- å·¦ä¾§é¢æ¿ -->
        <Grid  Grid.Column="0">
            <Grid x:Name="LeftPanel" >

                <Grid.RowDefinitions>
                    <RowDefinition Height="0.08*" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="0.08*"/>
                </Grid.RowDefinitions>

                <!-- æœç´¢æ ä¸ŽåŠŸèƒ½æŒ‰é’®åŒºåŸŸ -->
                <Grid Grid.Row="0" Padding="3">

                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBox x:Name="SearchBox" Width="250" Height="35" PlaceholderText="Search..." Margin="0,0,10,0" Grid.Column="0" HorizontalAlignment="Left" BorderBrush="Transparent" BorderThickness="0" TextChanged="SearchBox_TextChanged"/>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Grid.Column="1">
                        <Button Content="ç­›é€‰"
                                Style="{StaticResource IconButtonStyle}" Width="55">
                            <Button.Flyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem Text="ðŸ“Œ åªçœ‹æ”¶è—" Click="FilterFavorite_Click" />
                                    <MenuFlyoutItem Text="ðŸ•‘ æœ€è¿‘ä½¿ç”¨" Click="FilterRecent_Click" />
                                    <MenuFlyoutItem Text="ðŸ“ åªçœ‹ç¬”è®°" Click="FilterNote_Click" />
                                    <MenuFlyoutItem Text="ðŸ“ åªçœ‹æ–‡ä»¶å¤¹" Click="FilterFolder_Click" />
                                    <MenuFlyoutSeparator />
                                    <MenuFlyoutItem Text="ðŸ”„ æ¸…é™¤ç­›é€‰" Click="FilterClear_Click" />
                                </MenuFlyout>
                            </Button.Flyout>
                        </Button>

                        <Button Style="{StaticResource IconButtonStyle}" Click="ToggleMultiSelect_Click">
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE762;"  />
                        </Button>
                        <Button Style="{StaticResource IconButtonStyle}">
                            <Button.Flyout>
                                <MenuFlyout Placement="Right">
                                    <MenuFlyoutItem Text="æ–‡ä»¶å¤¹" Command="{x:Bind ViewModel.CreateFolderCommand}"/>
                                    <MenuFlyoutItem Text="ç¬”è®°" Command="{x:Bind ViewModel.CreateNoteCommand}" />
                                </MenuFlyout>
                            </Button.Flyout>
                            <FontIcon FontFamily="Segoe MDL2 Assets" Glyph="&#xE710;" />
                        </Button>
                    </StackPanel>

                </Grid>

                <!--åˆ—è¡¨ï¼Œ_Itemæ˜¯åŒ…å«æ•´ä¸ªåˆ—è¡¨ç±»çš„åˆ—è¡¨ï¼Œç”¨äºŽæ˜¾ç¤ºï¼Œå…¶ä¸­çš„æ•°æ®éƒ½æ˜¯ItemæŠ½è±¡ç±»çš„å»¶ä¼¸-->
                <ListView x:Name="MyTreeView"
                      Grid.Row="1"
                      Background="Transparent"
              ItemsSource="{x:Bind ViewModel.Items}"
              ItemTemplateSelector="{StaticResource ItemTemplateSelector}"
                          SelectionMode="Multiple"
                          IsMultiSelectCheckBoxEnabled="{Binding IsMultiSelectEnabled, Mode=OneWay}"
                          SelectionChanged="MyTreeView_SelectionChanged">
                    
                </ListView>
                
                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Visibility="{Binding IsMultiSelectEnabled, Mode=OneWay}">
                    <Button  Content="æ”¶è—" Click="OnFavoriteClicked"/>
                    <Button Content="å–æ¶ˆæ”¶è—" Click="UnFavoriteClicked"/>
                    <Button Content="åˆ é™¤" Click="DeleteSelected_Clicked" />
                    <Button Content="ç§»åŠ¨" Click="MoveSelected_Clicked"/>
                    <Button Content="{Binding SelectAllButtonText}" Click="SelectAllButton_Click"/>
                </StackPanel>
            </Grid>

        </Grid>
        <!-- å³ä¾§æ˜¾ç¤ºåŒºåŸŸ -->
        <Grid x:Name="RightPanel" Grid.Column="1"
              PointerMoved="OnPointerMoved"
              Background="Transparent">
            <Frame x:Name="ContentFrame"/>
           

        </Grid>


    </Grid></Page>
